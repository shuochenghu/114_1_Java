# 第三階段：課堂教學流程建議

## 📋 課前準備（5分鐘）

### 教師準備
- [ ] 複習第二階段的具體方法與抽象方法
- [ ] 準備類別繼承結構圖
- [ ] 準備白板：畫繼承樹狀圖
- [ ] 測試第三階段程式碼

### 學生準備
- [ ] 完成第二階段作業
- [ ] 複習繼承的概念
- [ ] 思考「哪些角色有共同特性」

---

## 🎯 教學流程（50分鐘課程）

### Part 1: 引入問題 - 屬性膨脹（10分鐘）

#### 步驟 1: 回顧現況
「目前我們的 Role 類別包含：name, health, attackPower
如果要新增更多角色類型，會遇到什麼問題？」

#### 步驟 2: 提出場景
**展示問題：**
```java
// 如果直接在 Role 加入所有屬性
public abstract class Role {
    private int armor;     // 只有近戰需要
    private int range;     // 只有遠程需要
    private int energy;    // 只有遠程需要
    // ...越來越多
}
```

**提問學生：**
「魔法師需要 armor 嗎？劍士需要 energy 嗎？」

#### 步驟 3: 引導發現問題
- 屬性混亂：每個角色都有一堆用不到的屬性
- 記憶體浪費
- 概念不清晰

---

### Part 2: 引入中間層解決方案（15分鐘）

#### 步驟 1: 分類角色
**在白板畫圖：**
```
所有角色
├─ 近戰角色（劍士、持盾劍士）
│  共同點：護甲、近距離攻擊
└─ 遠程角色（魔法師、弓箭手）
   共同點：射程、能量管理
```

#### 步驟 2: 引入 MeleeRole 和 RangedRole
**展示新的繼承結構：**
```
Role (所有角色共通)
├─ MeleeRole (近戰角色共通)
│  ├─ SwordsMan
│  └─ ShieldSwordsMan
└─ RangedRole (遠程角色共通)
   ├─ Magician
   └─ Archer
```

#### 步驟 3: 解釋好處
1. 每個類別只包含相關屬性
2. 結構清晰，易於理解
3. 新增角色時可以選擇繼承哪個中間層

---

### Part 3: 實作與討論（15分鐘）

#### 步驟 1: 帶學生看 MeleeRole
```java
public abstract class MeleeRole extends Role {
    private int armor;  // 近戰特有
    
    public int calculateDefense(int damage) {
        return Math.max(0, damage - armor);
    }
    
    public abstract String getWeaponType();
}
```

**重點說明：**
- MeleeRole 也是抽象類別
- 可以有具體方法（calculateDefense）
- 可以有抽象方法（getWeaponType）
- 繼承 Role 的同時，新增近戰專屬內容

#### 步驟 2: 讓學生思考 RangedRole
**給 5 分鐘討論：**
「遠程角色應該有什麼共同屬性和方法？」

**引導答案：**
- 射程（range）
- 能量值（energy）
- 射程檢查方法
- 能量消耗方法

#### 步驟 3: 展示完整結構
**執行程式，展示：**
- 近戰角色有護甲，受到攻擊時會減免傷害
- 遠程角色有能量，攻擊時會消耗能量
- 每個角色只有自己需要的屬性

---

### Part 4: 實作練習與總結（10分鐘）

#### 步驟 1: 分析 Archer（弓箭手）
「弓箭手應該繼承哪個類別？」
- 弓箭手是遠程攻擊 → RangedRole
- 需要射程和能量管理 → 自動獲得
- 額外有箭矢數量 → 自己新增

#### 步驟 2: 討論設計決策
**提問：**
1. 「為什麼 armor 不放在 Role？」
2. 「如果有個角色既會近戰又會遠程，怎麼辦？」
3. 「繼承層次可以無限深嗎？」

#### 步驟 3: 總結設計原則
- 從一般到特殊
- 每層職責單一
- 避免過深繼承（建議 3-4 層）

---

## 💡 互動技巧

### 提問策略

1. **分類式提問**
   「哪些角色屬於近戰？哪些屬於遠程？」

2. **對比式提問**
   「MeleeRole 和 RangedRole 的差異是什麼？」

3. **設計式提問**
   「如果要新增『騎士』角色，應該繼承誰？」

### 視覺化教學

**在白板畫繼承樹：**
```
        Role
       /    \
  MeleeRole  RangedRole
    /    \      /    \
  Swords Shield Magi Archer
  Man    Swords an
         Man
```

**用不同顏色標註：**
- 藍色：抽象類別
- 綠色：具體類別
- 紅色：新增的屬性

---

## 📝 課後作業

### 基礎作業：新增 Priest（牧師）
1. 決定繼承結構（提示：遠程治療者）
2. 實作所有必要方法
3. 說明為什麼選擇這個繼承結構

### 進階作業：新增 Assassin（刺客）
1. 刺客是近戰，但有隱身能力
2. 設計隱身機制
3. 實作特殊攻擊（背刺）

### 挑戰作業：設計 HealerRole
1. 設計一個治療者中間層
2. 思考它應該放在哪裡
3. 分析這個設計的問題（預告：介面）

---

## 🎓 評量重點

### 知識面（40%）
- 能解釋為什麼需要中間層
- 能說明多層繼承的優缺點
- 理解單一繼承的限制

### 技能面（40%）
- 能正確設計繼承結構
- 能實作中間抽象類別
- 能判斷該繼承哪個類別

### 應用面（20%）
- 能為新角色選擇適當的父類別
- 能識別設計問題
- 能提出改進建議

---

## 🔄 下週預告

**第四階段：引入介面（Interface）**

預告內容：
```
「下週我們要解決一個重要問題：
如果一個角色既會防禦又會治療，該怎麼設計？

Java 的單一繼承限制：
- 只能繼承一個類別
- 但可以實作多個介面！

我們將學習：
1. 介面 vs 抽象類別
2. Defendable、Healable 介面
3. 一個類別實作多個介面

請思考：
- 什麼時候該用抽象類別？
- 什麼時候該用介面？」
```

---

## ⏰ 時間分配

| 階段 | 時間 | 重點 |
|-----|------|------|
| 引入問題 | 10分鐘 | 屬性膨脹問題 |
| 解決方案 | 15分鐘 | 中間層設計 |
| 實作練習 | 15分鐘 | 分析與實作 |
| 討論總結 | 10分鐘 | 設計原則 |

---

## 📚 補充說明

### 設計模式相關
這個多層繼承結構體現了：
- **模板方法模式**（Template Method）
- **策略模式**（Strategy）的雛形

### 實務應用
在實際開發中：
- 遊戲引擎常用這種結構
- UI 框架也有類似設計
- 但要注意不要過度繼承

---

## 🎯 教學技巧

### 1. 循序漸進
先讓學生發現問題，再引入解決方案

### 2. 視覺化
多用圖表展示繼承關係

### 3. 對比教學
對比有無中間層的差異

### 4. 實例導向
用具體的遊戲角色幫助理解

---

**教學提示：**
- 強調「分類思維」的重要性
- 用生活例子解釋繼承層次（生物分類）
- 鼓勵學生畫圖表達繼承關係
- 提醒單一繼承的限制（為介面鋪路）
